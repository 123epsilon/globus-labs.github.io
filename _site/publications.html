<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Globus Labs</title>
  <link rel="shortcut icon" href="http://localhost:4000/images/theme/favicon.ico?v=2">


  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
    integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/styles.css" type="text/css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
    integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
    crossorigin="anonymous"></script>

  <script src="/js/jquery.min.js"></script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        TeX: {
            extensions: ["cancel.js"],
            equationNumbers: {
                autoNumber: "AMS"
            },
            Macros: {
             '\(': '\\left(',
             '\)': '\\right)',
             '\[': '\\left[',
             '\]': '\\right]',
            }
        },
        tex2jax: {
            inlineMath: [ ['$','$'] ],
            displayMath: [ ['$$','$$'] ],
            skipTags: ["script","noscript","style","textarea"],
            processEnvironments: true,
            processEscapes: true,
        }
    });
   </script>
  <script src="http://localhost:35729/livereload.js"></script>
  <script src="https://togetherjs.com/togetherjs-min.js"></script>
  <script type="text/javascript"
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


</head>

<body>
  

  <header id="masthead">
    <nav id="navbar" class="navbar" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-nav"
            aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/"><img class="img-responsive"
              src="http://localhost:4000/images/globus_labs-XL-dark-bg-cropped.png" alt="Globus Labs" data-pin-nopin="true" width="192" height="38"></a>
        </div>

        <div class="collapse navbar-collapse" id="main-nav">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/" >Overview</a></li>
            <li><a href="/people.html" >People</a></li>
            <li><a href="/projects.html" >Projects</a>
            </li>
            <li><a href="/news.html" >News</a></li>
            <!-- <li><a href="/blog.html" >Blog</a></li> -->
            <li><a href="/publications.html" class="active"
                >Publications</a></li>
            <li><a href="/join.html" >Join Us</a></li>
          </ul>
        </div>
      </div>
    </nav>
  </header>

  <main class="container">

    <script src="js/parser.js"></script>

<script>

function get_format(data, field, pre, post){
    if (field in data && data[field] != ""){
        return pre + data[field] + post;
    }
    return "";
}

function get_authors(authors){
    var author_string = "";
    for (var i = 0, len = authors.length; i < len; i++) {
        author_string += authors[i].trim();
        if (i < authors.length - 2){
                author_string += ', ';
        } else if (i == authors.length - 2){
                author_string += ' and ';
        }
    } 
    if (author_string.endsWith(".")){
      author_string = author_string.substring(0, author_string.length - 1);
    }
    return author_string;

}

function format_bib(data){
    var formated = $("<p>");
 
    var author_string = get_authors(data["Fields"]["author"].split("and"));
    
    formated.append($("<span>", {"text" : author_string + ". ", "class" : "authors"}));
    formated.append($("</br>"));
    
    var link = $("<span>");
    if ("note" in data["Fields"]){ 
        link = $("<a>", {"href" : "pubs/" + data["Fields"]["note"]});
        var pdf = $("<img>", {"src": "/images/pdficon.png"});
        link.append(pdf)
    }
    var title = $("<span>", {"text" : "\"" + data["Fields"]["title"] + ".\" "})
    link.append(title).append($("</br>"));

    formated.append(link);
    
    var journal_conference = ""
    if (data["EntryType"] == "article"){
        journal_conference += data["Fields"]["journal"];
    } else if (data["EntryType"] == "inproceedings"){
        journal_conference += data["Fields"]["booktitle"] ;
    } else if (data["EntryType"] == "incollection"){
        journal_conference += data["Fields"]["booktitle"];
    }

    
    journal_conference += get_format(data["Fields"], "volume", ". ", "");
    journal_conference += get_format(data["Fields"], "number", "(", ")");
    journal_conference += get_format(data["Fields"], "pages", ". pp ", "");
    journal_conference += get_format(data["Fields"], "year", ". ", ".");

    formated.append($("<span>", {"text" : journal_conference}));
    formated.append($("<br>"));

    if ("doi" in data["Fields"] && data["Fields"]["doi"] != ""){
        formated.append($("<span>", {"text" : "doi: "}));
        formated.append($("<a>", {"href" : "https://doi.org/" + data["Fields"]["doi"], "text" :  data["Fields"]["doi"]}));
    }

    return formated; 
}

$( document ).ready(function() {

   var display_bib = function(data) {
       var paper = $("<div>", {"id" : data['EntryKey'], "class": "row ref-holder"});
       var li = $("<li>");
       var ref_text =  format_bib(data);
       li.append(ref_text);
       paper.append(li);
       $("#publist").append(paper)
   }

   $.get( "pubs/labs-pubs.bib", function( data ) {
       var parser = BibtexParser(display_bib);
       parser.parse(data);
   });



});

</script>

    <h1>Recent Publications</h1>

    <ol id='publist'>
    </ol>



  </main>

  <footer>
    <div class="container">
      <div class="row">
        <div class="col-sm-2"></div>
        <div class="col-sm-3"><a href="http://www.ci.uchicago.edu/"><img class="img-responsive"
              src="http://localhost:4000/images/theme/ci.png"></a></div>
        <div class="col-sm-3"><a href="http://www.uchicago.edu/"><img class="img-responsive"
              src="http://localhost:4000/images/theme/uchicago.png"></a></div>
        <div class="col-sm-3"><a href="https://www.anl.gov/"><img class="img-responsive"
              src="http://localhost:4000/images/theme/anl.png"></a></div>
        <div class="col-sm-2"></div>
      </div>
      <!-- 
				<div class="row">
              <div class="col-xs-12">
                <p class="copyright">&copy; <script>document.write(new Date().getFullYear())</script> The University of Chicago</p>
              </div>
          </div>
					-->
    </div>
  </footer>

</body>

</html>